import{b as u,j as e,o as x,r as m,m as r}from"./index-CKYMUaQW.js";import{a as f}from"./use-browse-B_-10Gwg.js";import{S as p,u as g}from"./use-search-history-Bbe8l775.js";import{M as j,a as y,b as N}from"./MangaGrid-njmF1wgV.js";import{u as b}from"./use-navigation-DOs1thp5.js";import{c as h}from"./utils-BDo7o5Y5.js";import{A as v}from"./arrow-left-CQkoRQDD.js";function S({title:o,showBack:s=!0,showSearch:n=!1,onSearchClick:t,transparent:i=!1}){const{goBack:l}=b(),a=u(10);return e.jsx("header",{className:h("sticky top-0 z-40 md:hidden -mx-4 px-4",i&&!a?"bg-transparent":"bg-background",a&&"shadow-sm"),style:{paddingTop:"env(safe-area-inset-top, 0px)"},children:e.jsxs("div",{className:"flex items-center h-14 -mx-2",children:[s&&e.jsx("button",{type:"button",onClick:()=>l("/"),className:"size-10 flex items-center justify-center rounded-full hover:bg-muted/50 transition-colors","aria-label":"Quay lại",children:e.jsx(v,{className:"w-5 h-5"})}),e.jsx("h1",{className:h("flex-1 text-lg font-semibold truncate",!s&&"ml-2"),children:o}),n&&t&&e.jsx("button",{type:"button",onClick:t,className:"size-10 flex items-center justify-center rounded-full hover:bg-muted/50 transition-colors","aria-label":"Tìm kiếm",children:e.jsx(p,{className:"w-5 h-5"})})]})})}function E(){const[o]=x(),s=o.get("q")??"",{addSearch:n}=g(),t=s.length>2,{data:i,isLoading:l}=f(t?s:""),a=m.useMemo(()=>i?.data??[],[i]);m.useEffect(()=>{s&&t&&n(s)},[s,t,n]);const d=s?r.search.resultsFor(s):r.search.title;return e.jsxs(e.Fragment,{children:[s&&e.jsx("title",{children:r.titles.search(s)}),e.jsx(S,{title:d,showBack:!0}),e.jsxs("div",{className:"py-4 md:py-6 space-y-6 md:space-y-8",children:[e.jsxs("div",{className:"hidden md:flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-semibold tracking-tight",children:d}),t&&!l&&e.jsx("span",{className:"text-sm text-muted-foreground",children:r.search.results(a.length)})]}),t&&!l&&e.jsx("div",{className:"md:hidden text-sm text-muted-foreground",children:r.search.results(a.length)}),e.jsx("div",{className:"min-h-[200px]",children:s?s.length<=2?e.jsx("div",{className:"text-center text-muted-foreground py-12",children:r.search.minChars}):l?e.jsx(j,{count:12}):a.length>0?e.jsx(y,{children:a.map(c=>e.jsx(N,{id:c.id.toString(),title:c.title,coverUrl:c.image??"/placeholder.svg",latestChapter:c.latestChapter?.title},c.id))}):e.jsx("div",{className:"text-center text-muted-foreground py-12",children:r.search.noResults(s)}):e.jsx("div",{className:"text-center text-muted-foreground py-12",children:r.search.useSearchButton})})]})]})}export{E as default};
